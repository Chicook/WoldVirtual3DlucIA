# Sistema de Avatares Humanos 3D para Metaverso

## üìã Descripci√≥n

Sistema modular completo para generar, personalizar y animar avatares humanos 3D en tiempo real para el metaverso descentralizado. Integra generaci√≥n procedural, personalizaci√≥n avanzada, animaciones complejas y f√≠sica realista.

## üèóÔ∏è Arquitectura Modular

### **M√≥dulos Principales:**

1. **`avatar-generator.js`** - Generador base de avatares 3D
2. **`avatar-customization.js`** - Sistema de personalizaci√≥n avanzada
3. **`avatar-animations.js`** - Animaciones y expresiones faciales
4. **`avatar-physics.js`** - F√≠sica realista para avatares
5. **`avatar-controller.js`** - Controlador unificado

## üöÄ Caracter√≠sticas Principales

### **Generaci√≥n de Avatares**
- ‚úÖ Geometr√≠as procedurales (cabeza, cuerpo, extremidades)
- ‚úÖ Sistema de esqueleto jer√°rquico
- ‚úÖ Materiales y texturas din√°micas
- ‚úÖ Diferentes tipos de cuerpo (delgado, promedio, atl√©tico, robusto)
- ‚úÖ G√©neros masculino y femenino

### **Personalizaci√≥n Avanzada**
- ‚úÖ Interfaz de usuario intuitiva
- ‚úÖ Presets predefinidos (atleta, ejecutivo, casual, gamer)
- ‚úÖ Personalizaci√≥n de altura, complexi√≥n, tono de piel
- ‚úÖ Estilos de cabello (corto, largo, rizado, calvo)
- ‚úÖ Colores de cabello y ojos
- ‚úÖ Ropa (casual, formal, deportivo)
- ‚úÖ Accesorios (gafas, sombrero, reloj, collar)

### **Animaciones Complejas**
- ‚úÖ Animaciones b√°sicas (caminar, correr, saltar)
- ‚úÖ Expresiones faciales (feliz, triste, enojado, sorprendido)
- ‚úÖ Gestos (se√±alar, pulgar arriba, paz, pu√±o)
- ‚úÖ Animaciones de interacci√≥n (saludar, aplaudir, bailar)
- ‚úÖ Sistema de mezclado de animaciones
- ‚úÖ Animaciones de reposo y respiraci√≥n

### **F√≠sica Realista**
- ‚úÖ Gravedad y colisiones
- ‚úÖ Movimiento suave y natural
- ‚úÖ Detecci√≥n de suelo
- ‚úÖ Fricci√≥n y restituci√≥n
- ‚úÖ L√≠mites de velocidad
- ‚úÖ Sistema de fuerzas e impulsos
- ‚úÖ Obst√°culos din√°micos

## üì¶ Instalaci√≥n y Uso

### **Uso B√°sico**

```javascript
// Crear controlador de avatar
const controller = new AvatarController(container, {
    enablePhysics: true,
    enableAnimations: true,
    enableCustomization: true,
    autoRender: true
});

// Crear avatar personalizado
controller.createAvatar({
    gender: 'male',
    height: 1.8,
    build: 'athletic',
    skinTone: 'medium',
    hairStyle: 'short',
    hairColor: 'brown',
    eyeColor: 'blue',
    clothing: 'sport',
    accessories: ['watch']
});
```

### **Uso Avanzado**

```javascript
// Personalizar avatar
controller.customize({
    hairStyle: 'long',
    hairColor: 'blonde',
    accessories: ['glasses', 'necklace']
});

// Reproducir animaciones
controller.playAnimation('walk', true);
controller.playExpression('happy');
controller.playGesture('wave');

// Controlar movimiento
controller.move({ x: 1, z: 0 }, 2.0);
controller.jump();
controller.run();

// Aplicar f√≠sica
controller.applyForce(new THREE.Vector3(0, 10, 0));
controller.addObstacle(new THREE.Vector3(5, 0, 0), 1.0);
```

## üéÆ Controles de Movimiento

### **Teclado (WASD)**
- **W** - Mover hacia adelante
- **S** - Mover hacia atr√°s
- **A** - Mover hacia la izquierda
- **D** - Mover hacia la derecha
- **Espacio** - Saltar
- **Shift** - Correr

### **Mouse**
- **Click izquierdo + arrastrar** - Rotar c√°mara
- **Scroll** - Zoom in/out
- **Click derecho + arrastrar** - Pan

## üé® Personalizaci√≥n

### **Presets Disponibles**
- **Default** - Avatar b√°sico
- **Athlete** - Atleta deportivo
- **Business** - Ejecutivo formal
- **Casual Female** - Mujer casual
- **Gamer** - Jugador casual

### **Opciones de Personalizaci√≥n**
- **G√©nero**: Masculino, Femenino
- **Altura**: 1.5m - 2.0m
- **Complexi√≥n**: Delgado, Promedio, Atl√©tico, Robusto
- **Tono de Piel**: Claro, Medio, Oscuro, Muy Oscuro
- **Color de Ojos**: Marr√≥n, Azul, Verde, Avellana
- **Estilo de Cabello**: Corto, Largo, Rizado, Calvo
- **Color de Cabello**: Negro, Marr√≥n, Rubio, Rojo, Gris, Blanco
- **Ropa**: Casual, Formal, Deportivo
- **Accesorios**: Gafas, Sombrero, Reloj, Collar

## üé≠ Animaciones

### **Animaciones B√°sicas**
- `walk` - Caminar
- `run` - Correr
- `jump` - Saltar
- `sit` - Sentarse
- `stand` - Levantarse
- `dance` - Bailar

### **Expresiones Faciales**
- `happy` - Feliz
- `sad` - Triste
- `angry` - Enojado
- `surprised` - Sorprendido
- `neutral` - Neutral

### **Gestos**
- `wave` - Saludar
- `clap` - Aplaudir
- `point` - Se√±alar
- `thumbsUp` - Pulgar arriba
- `peace` - Paz
- `fist` - Pu√±o

## ‚öôÔ∏è Configuraci√≥n

### **Configuraci√≥n del Controlador**
```javascript
const config = {
    enablePhysics: true,        // Habilitar f√≠sica
    enableAnimations: true,     // Habilitar animaciones
    enableCustomization: true,  // Habilitar personalizaci√≥n
    enableNetworking: false,    // Habilitar networking
    autoRender: true           // Renderizado autom√°tico
};
```

### **Configuraci√≥n de F√≠sica**
```javascript
const physicsConfig = {
    mass: 70.0,           // Masa en kg
    height: 1.8,          // Altura en metros
    gravity: -9.81,       // Gravedad en m/s¬≤
    friction: 0.7,        // Coeficiente de fricci√≥n
    restitution: 0.3,     // Coeficiente de restituci√≥n
    maxSpeed: 5.0,        // Velocidad m√°xima en m/s
    jumpForce: 8.0        // Fuerza de salto en m/s
};
```

## üîß API Completa

### **AvatarController**

#### **M√©todos Principales**
- `createAvatar(config)` - Crear avatar con configuraci√≥n
- `customize(config)` - Personalizar avatar existente
- `playAnimation(name, loop)` - Reproducir animaci√≥n
- `playExpression(name)` - Reproducir expresi√≥n
- `playGesture(name)` - Reproducir gesto
- `move(direction, speed)` - Mover avatar
- `jump()` - Saltar
- `run()` - Correr
- `walk()` - Caminar
- `stop()` - Detener movimiento

#### **M√©todos de F√≠sica**
- `applyForce(force)` - Aplicar fuerza
- `applyImpulse(impulse)` - Aplicar impulso
- `addObstacle(position, radius)` - A√±adir obst√°culo
- `getPosition()` - Obtener posici√≥n
- `setPosition(position)` - Establecer posici√≥n
- `getVelocity()` - Obtener velocidad
- `getState()` - Obtener estado

#### **M√©todos de Configuraci√≥n**
- `setPhysicsEnabled(enabled)` - Habilitar/deshabilitar f√≠sica
- `setAnimationsEnabled(enabled)` - Habilitar/deshabilitar animaciones
- `setCustomizationEnabled(enabled)` - Habilitar/deshabilitar personalizaci√≥n
- `getConfig()` - Obtener configuraci√≥n
- `getStats()` - Obtener estad√≠sticas

#### **M√©todos de Exportaci√≥n/Importaci√≥n**
- `exportAvatar()` - Exportar avatar como JSON
- `importAvatar(data)` - Importar avatar desde JSON

## üåê Integraci√≥n con Metaverso

### **Integraci√≥n con ECS**
```javascript
// Crear entidad de avatar en el ECS
const avatarEntity = ecsManager.createEntity();
ecsManager.addComponent(avatarEntity, 'Transform', {
    position: [0, 0, 0],
    rotation: [0, 0, 0],
    scale: [1, 1, 1]
});
ecsManager.addComponent(avatarEntity, 'Player', {
    playerId: 'user123',
    username: 'Player1'
});
```

### **Integraci√≥n con Networking**
```javascript
// Sincronizar posici√≥n del avatar
networkManager.sendPlayerPosition(
    avatarController.getPosition(),
    avatarController.getVelocity()
);
```

### **Integraci√≥n con Blockchain**
```javascript
// Guardar avatar como NFT
const avatarData = avatarController.exportAvatar();
blockchainManager.mintAvatarNFT(avatarData, playerWallet);
```

## üéØ Ejemplos de Uso

### **Ejemplo 1: Avatar B√°sico**
```javascript
const container = document.getElementById('avatar-container');
const controller = new AvatarController(container);

controller.createAvatar({
    gender: 'male',
    height: 1.75,
    build: 'average',
    skinTone: 'medium',
    hairStyle: 'short',
    hairColor: 'black',
    eyeColor: 'brown',
    clothing: 'casual'
});
```

### **Ejemplo 2: Avatar Deportivo**
```javascript
controller.createAvatar({
    gender: 'female',
    height: 1.65,
    build: 'athletic',
    skinTone: 'medium',
    hairStyle: 'long',
    hairColor: 'blonde',
    eyeColor: 'blue',
    clothing: 'sport',
    accessories: ['watch']
});

controller.playAnimation('run', true);
```

### **Ejemplo 3: Avatar Interactivo**
```javascript
// Configurar controles de teclado
document.addEventListener('keydown', (event) => {
    switch(event.key) {
        case 'w':
            controller.move({ x: 0, z: -1 }, 2.0);
            break;
        case 's':
            controller.move({ x: 0, z: 1 }, 2.0);
            break;
        case 'a':
            controller.move({ x: -1, z: 0 }, 2.0);
            break;
        case 'd':
            controller.move({ x: 1, z: 0 }, 2.0);
            break;
        case ' ':
            controller.jump();
            break;
        case 'Shift':
            controller.run();
            break;
    }
});
```

## üîÆ Caracter√≠sticas Futuras

### **Pr√≥ximas Implementaciones**
- [ ] Sistema de ropa din√°mica
- [ ] Animaciones de combate
- [ ] Expresiones faciales avanzadas
- [ ] Sistema de emociones
- [ ] Integraci√≥n con IA para comportamiento
- [ ] Animaciones de grupo
- [ ] Sistema de part√≠culas para efectos
- [ ] Integraci√≥n con VR/AR

### **Optimizaciones Planificadas**
- [ ] LOD (Level of Detail) din√°mico
- [ ] Culling de animaciones
- [ ] Compresi√≥n de datos de avatar
- [ ] Streaming de texturas
- [ ] Cache inteligente

## üìä Rendimiento

### **M√©tricas T√≠picas**
- **FPS**: 60+ en dispositivos modernos
- **Memoria**: ~50MB por avatar
- **Pol√≠gonos**: ~2,000 por avatar
- **Texturas**: ~10MB por avatar
- **Animaciones**: ~20 animaciones simult√°neas

### **Optimizaciones Implementadas**
- ‚úÖ Geometr√≠as optimizadas
- ‚úÖ Materiales compartidos
- ‚úÖ Animaciones con keyframes optimizados
- ‚úÖ F√≠sica simplificada pero realista
- ‚úÖ Renderizado eficiente

## ü§ù Contribuci√≥n

### **C√≥mo Contribuir**
1. Fork del repositorio
2. Crear rama de feature
3. Implementar cambios
4. A√±adir tests
5. Crear Pull Request

### **Est√°ndares de C√≥digo**
- ES6+ JavaScript
- JSDoc para documentaci√≥n
- ESLint para linting
- Prettier para formateo
- Tests unitarios con Jest

## üìÑ Licencia

Este proyecto est√° bajo la licencia MIT. Ver `LICENSE` para m√°s detalles.

## üÜò Soporte

### **Problemas Comunes**
1. **Avatar no se renderiza**: Verificar que Three.js est√© cargado
2. **Animaciones no funcionan**: Verificar que el sistema de animaciones est√© habilitado
3. **F√≠sica no responde**: Verificar que el sistema de f√≠sica est√© habilitado
4. **Personalizaci√≥n no aparece**: Verificar que el contenedor tenga dimensiones

### **Contacto**
- **Issues**: GitHub Issues
- **Discord**: Canal #avatars
- **Email**: avatars@metaverso.com

---

**Desarrollado para el Metaverso Crypto World Virtual 3D** üöÄ 